name: RocketPoolETHCustomIndexer
description: Enhanced rindexer project with advanced aggregation features
repository: https://github.com/joshstevens19/rindexer
project_type: no-code
networks:
  - name: ethereum
    chain_id: 1
    rpc: https://mainnet.gateway.tenderly.co
storage:
  postgres:
    enabled: true
    drop_each_run: true
contracts:
  - name: RocketPoolETH
    details:
      - network: ethereum
        address: 0xae78736cd615f374d3085123a210448e74fc6393
        start_block: '18600000'
        end_block: '18718056'
    abi: ./abis/RocketTokenRETH.abi.json

    # Standard event logging (existing functionality)
    include_events:
      - Transfer
      - TokensMinted
      - TokensBurned

    # Enhanced custom indexing functionality
    custom_indexing:
      # Table for tracking individual address balances
      - name: token_balances
        description: "Tracks the current rETH balance for each address"
        fields:
          - name: address
            type: address
            primary: true
          - name: balance
            type: uint256
            index: true

        events:
          - event: Transfer
            mappings:
              - match: to
                updates:
                  - field: balance
                    action: add
                    value: value

              - match: from
                updates:
                  - field: balance
                    action: subtract
                    value: value